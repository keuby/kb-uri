/**
 * kb-uri v1.0.0
 * release at 2020-4-15
 * by Keuby
 * github git+https://github.com/keuby/kb-uri.git
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).KbURI=n()}(this,function(){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function c(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,o=!1,c=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){o=!0,c=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw c}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var i=function(){function n(t){var o=this;e(this,n),this._query=Object.create(null),decodeURIComponent(t||"").split("&").forEach(function(t){var n=c(t.split("="),2),e=n[0],r=n[1];e&&(o._query[e]=r)})}return t(n,[{key:"get",value:function(t){return this._query[t]}},{key:"getAll",value:function(){return Object.assign({},this._query)}},{key:"set",value:function(t,n){this._query[t]=n}},{key:"remove",value:function(t){delete this._query[t]}},{key:"toString",value:function(t){var n=this,e=!(0<arguments.length&&void 0!==t)||t?function(t){return"".concat(t,"=").concat(encodeURIComponent(n._query[t]))}:function(t){return"".concat(t,"=").concat(n._query[t])},r=Object.keys(this._query).map(e).join("&");return r&&"?"+r}}]),n}(),n="[!$&'()*+,;=]",a="[a-zA-z0-9-._~]",u="(?:%[0-9a-fA-F]{2})",s="".concat(a,"|").concat(u,"|").concat(n,"|:|@"),h="(?:".concat(s,")*"),f="((?:".concat(a,"|").concat(u,"|").concat(n,"|:)*)"),l="(?:".concat(f,"@)?").concat("(?:([^/?#:]*))","(?::").concat("([0-9]*)",")?"),y="((?:/".concat(h,")*)"),p="(?:(?://".concat(l).concat(y,")|").concat(y,")"),v="((?:".concat(s,"|[/?])*)"),d="((?:".concat(s,"|[/?])*)"),m=new RegExp("^(?:(".concat("[a-zA-Z][a-zA-Z0-9+-.]*","):)?").concat(p,"(\\?").concat(v,")?(#").concat(d,")?$"));return function(){function n(t){e(this,n),this.query=new i,null==t&&"undefined"!=typeof location&&(t=location.href),this.resolve(t)}return t(n,[{key:"resolve",value:function(t){if(!m.test(t))throw new TypeError("Invalid URL");return this._resolveURIPath(t),this}},{key:"_resolveURIPath",value:function(t){var n=m.exec(t);this.protocol=n[1]||"",this.userinfo=n[2]||"",this.hostname=n[3]||"",this.port=n[4]||"",this.path=n[5]||n[6]||"",this.query=new i(n[8]||""),this.hash=n[9]||""}},{key:"queryString",get:function(){return this.query.toString()}},{key:"host",get:function(){return this.port?"".concat(this.host,":").concat(this.port):this.host},set:function(t){var n=(t=String(t)).split(":");this.hostname=n[0],this.port=n[1]||""}},{key:"href",get:function(){var t="".concat(this.protocol,":"),n="";return this.hostname&&(n=this.hostname,this.port&&(n="".concat(n,":").concat(this.port)),this.userinfo&&(n="".concat(this.userinfo,"@").concat(n)),t+="//".concat(n)),t+this.path+this.queryString+this.hash}}]),n}()});
